canvas {
  width = 800
  height = 700
}

Set x {
    x.icon = Text { string : x.label }
}

Set x; Set y {
   -- Try to make sure no labels overlap
   encourage repel(x.icon, y.icon, 5.0)
}

-- TODO: Phase this back in

Set x; Set y
where IsSubset(x, y) as foo {
    foo.arrow = Arrow { -- why does this need an override flag?
      thickness : 2.0
      color : rgba(0.0, 0.0, 0.0, 1.0)
    }

    -- x.square = Square { color : rgba (0.5, 0.4, 0.2, 0.5)}

    -- foo.square = Square {} -- oddly, this calls for an override flag (and afterwards compiles fine)

    -- Draw the arrow from y to x
    foo.center = encourage centerArrow(foo.arrow, x.icon, y.icon)

    -- Position y above x
    encourage above(y.icon, x.icon)

    -- Have sets 'fight' to be aligned with the superset's x-position
    encourage equal(x.icon.center[0], y.icon.center[0])
}
/*
Set x; Set y
where IsSubset(x,y) as bar {
  bar.circle = Circle{}
  override bar.arrow.color = rgba(0.2, 0.1, 0.8, 1.0)
}
*/

/*
Set u; Set v
where  Not(Intersecting(u, v)) as bee {
  bee.square = Square{}
}
*/

/*
-- TODO: This one currently causes convergence to become very slow but works eventually

Set x1; Set x2
where IsSubset(x1, S); IsSubset(x2, S)
with Set S {
   -- If two sets are direct subsets of the same set, give them the same y-position
   heightFn = ensure sameHeight(x1.icon, x2.icon)
}
*/
